{"ast":null,"code":"var _jsxFileName = \"/home/uki-jaffna/biddingweb/frontend/src/components/ViewerDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ViewerDashboard() {\n  _s();\n  const [auctions, setAuctions] = useState([]); // State to hold the auctions data\n  const [loading, setLoading] = useState(true); // State to handle loading\n  const [error, setError] = useState(null); // State for error handling\n\n  useEffect(() => {\n    // Prevent page reload on first visit\n    if (!sessionStorage.getItem('hasVisited')) {\n      sessionStorage.setItem('hasVisited', 'true');\n      window.location.reload();\n    }\n  }, []);\n  useEffect(() => {\n    console.log(\"Auctions state updated:\", auctions);\n  }, [auctions]); // This will trigger every time `auctions` changes\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/auctions/').then(response => {\n      setAuctions(response.data.auctions); // if response.data.auctions is the array\n      setLoading(false);\n    }).catch(err => {\n      setError('Failed to fetch auctions');\n      setLoading(false);\n    });\n  }, []); // Run only on component mount\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }, this); // Show loading message while data is being fetched\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this); // Display error message if fetching fails\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: Array.isArray(auctions) && auctions.length > 0 ? auctions.map(auction => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px',\n        border: '1px solid #ccc',\n        padding: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: auction.tournamentName || \"No Tournament Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Leader Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 16\n        }, this), \" \", auction.leaderEmail || \"No Email Provided\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Bid Points Per Team:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 16\n        }, this), \" \", auction.bidPointsPerTeam || \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Teams:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this), auction.teams && auction.teams.length > 0 ? auction.teams.map((team, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: team.name || \"No Team Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Bid Points:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 22\n          }, this), \" \", team.bidPoints]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Remaining Bid Points:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 22\n          }, this), \" \", team.remainingBidPoints]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 19\n        }, this), team.image && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: team.image,\n          alt: team.name,\n          style: {\n            width: '100px',\n            height: 'auto'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 34\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No teams available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Players:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), auction.players && auction.players.length > 0 ? auction.players.map((playerId, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n        children: playerId\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this) // You should fetch player details if necessary\n      ) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No players listed.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this)]\n    }, auction._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No auctions found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(ViewerDashboard, \"jWOQ4Z2+DpPSaTcftCWvDimNd5A=\");\n_c = ViewerDashboard;\nvar _c;\n$RefreshReg$(_c, \"ViewerDashboard\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","ViewerDashboard","_s","auctions","setAuctions","loading","setLoading","error","setError","sessionStorage","getItem","setItem","window","location","reload","console","log","get","then","response","data","catch","err","children","fileName","_jsxFileName","lineNumber","columnNumber","Array","isArray","length","map","auction","style","marginBottom","border","padding","tournamentName","leaderEmail","bidPointsPerTeam","teams","team","index","name","bidPoints","remainingBidPoints","image","src","alt","width","height","players","playerId","_id","_c","$RefreshReg$"],"sources":["/home/uki-jaffna/biddingweb/frontend/src/components/ViewerDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function ViewerDashboard() {\n  const [auctions, setAuctions] = useState([]); // State to hold the auctions data\n  const [loading, setLoading] = useState(true); // State to handle loading\n  const [error, setError] = useState(null); // State for error handling\n\n  useEffect(() => {\n    // Prevent page reload on first visit\n    if (!sessionStorage.getItem('hasVisited')) {\n      sessionStorage.setItem('hasVisited', 'true');\n      window.location.reload();\n    }\n  }, []);\n\n  \n  useEffect(() => {\n    console.log(\"Auctions state updated:\", auctions);\n  }, [auctions]); // This will trigger every time `auctions` changes\n  \n  useEffect(() => {\n    axios\n      .get('http://localhost:5000/api/auctions/')\n      .then((response) => {\n        setAuctions(response.data.auctions); // if response.data.auctions is the array\n        setLoading(false);\n      })\n      .catch((err) => {\n        setError('Failed to fetch auctions');\n        setLoading(false);\n      });\n  }, []); // Run only on component mount\n  \n\n  if (loading) {\n    return <div>Loading...</div>; // Show loading message while data is being fetched\n  }\n\n  if (error) {\n    return <div>{error}</div>; // Display error message if fetching fails\n  }\n\n  return (\n    <div>\n      {Array.isArray(auctions) && auctions.length > 0 ? (\n        auctions.map(auction => (\n          <div key={auction._id} style={{ marginBottom: '20px', border: '1px solid #ccc', padding: '10px' }}>\n            <h2>{auction.tournamentName || \"No Tournament Name\"}</h2>\n            <p><strong>Leader Email:</strong> {auction.leaderEmail || \"No Email Provided\"}</p>\n            <p><strong>Bid Points Per Team:</strong> {auction.bidPointsPerTeam || \"N/A\"}</p>\n            \n            <h3>Teams:</h3>\n            {auction.teams && auction.teams.length > 0 ? (\n              auction.teams.map((team, index) => (\n                <div key={index} style={{ marginBottom: '10px' }}>\n                  <h4>{team.name || \"No Team Name\"}</h4>\n                  <p><strong>Bid Points:</strong> {team.bidPoints}</p>\n                  <p><strong>Remaining Bid Points:</strong> {team.remainingBidPoints}</p>\n                  {team.image && <img src={team.image} alt={team.name} style={{ width: '100px', height: 'auto' }} />}\n                </div>\n              ))\n            ) : (\n              <p>No teams available.</p>\n            )}\n\n            <h3>Players:</h3>\n            {/* You might need to fetch player data separately if it is referenced by ObjectId */}\n            {auction.players && auction.players.length > 0 ? (\n              auction.players.map((playerId, index) => (\n                <p key={index}>{playerId}</p> // You should fetch player details if necessary\n              ))\n            ) : (\n              <p>No players listed.</p>\n            )}\n          </div>\n        ))\n      ) : (\n        <p>No auctions found.</p>\n      )}\n    </div>\n  );\n}\n\n  \n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}