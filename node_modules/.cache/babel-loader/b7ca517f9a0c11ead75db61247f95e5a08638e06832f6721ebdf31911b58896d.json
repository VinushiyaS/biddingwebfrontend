{"ast":null,"code":"var _jsxFileName = \"/home/uki-jaffna/biddingweb/frontend/src/components/ViewerDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ViewerDashboard() {\n  _s();\n  const [auctions, setAuctions] = useState([]); // Auctions data\n  const [loading, setLoading] = useState(true); // Loading state\n  const [error, setError] = useState(null); // Error state\n\n  useEffect(() => {\n    // Prevent page reload on first visit\n    if (!sessionStorage.getItem('hasVisited')) {\n      sessionStorage.setItem('hasVisited', 'true');\n      window.location.reload();\n    }\n  }, []);\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/auctions/').then(response => {\n      setAuctions(response.data.auctions); // Ensure response contains 'auctions'\n      setLoading(false);\n    }).catch(err => {\n      setError('Failed to fetch auctions');\n      setLoading(false);\n    });\n  }, []);\n\n  // Function to get the player with the highest bid\n  const getHighestBidPlayer = () => {\n    if (auctions.length === 0) return null;\n\n    // Assuming auctions contain players with `bidAmount` property\n    return auctions.flatMap(auction => auction.players).reduce((max, player) => player.bidAmount > (max.bidAmount || 0) ? player : max, {});\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 12\n    }, this);\n  }\n  if (!auctions || auctions.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No auctions found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Tournament Information\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), auctions.map((auction, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Tournament: \", auction.tournamentName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Teams\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), auction.teams.map((team, teamIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: team.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Remaining Points: \", team.remainingBidPoints]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this)]\n      }, teamIndex, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), auction.players.map((player, playerIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Name: \", player.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this), player.photo ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: URL.createObjectURL(player.photo),\n          alt: `Player ${playerIndex + 1} Photo`,\n          style: {\n            width: '100px',\n            height: '100px',\n            borderRadius: '50%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No Photo Selected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Team: \", player.team]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Bid Amount: \", player.bidAmount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Status: \", player.done ? 'Done' : 'Pending']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this)]\n      }, playerIndex, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Top Bid Player\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), getHighestBidPlayer() ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Name: \", getHighestBidPlayer().name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Team: \", getHighestBidPlayer().team]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Bid Amount: \", getHighestBidPlayer().bidAmount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this), getHighestBidPlayer().photo && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: URL.createObjectURL(getHighestBidPlayer().photo),\n          alt: \"Top Player Photo\",\n          style: {\n            width: '100px',\n            height: '100px',\n            borderRadius: '50%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No players with bids yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(ViewerDashboard, \"ae1XFXRj7u5oIoB4vfJolt9F6vM=\");\n_c = ViewerDashboard;\nvar _c;\n$RefreshReg$(_c, \"ViewerDashboard\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","ViewerDashboard","_s","auctions","setAuctions","loading","setLoading","error","setError","sessionStorage","getItem","setItem","window","location","reload","get","then","response","data","catch","err","getHighestBidPlayer","length","flatMap","auction","players","reduce","max","player","bidAmount","children","fileName","_jsxFileName","lineNumber","columnNumber","map","index","tournamentName","teams","team","teamIndex","name","remainingBidPoints","playerIndex","style","marginBottom","photo","src","URL","createObjectURL","alt","width","height","borderRadius","done","_c","$RefreshReg$"],"sources":["/home/uki-jaffna/biddingweb/frontend/src/components/ViewerDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function ViewerDashboard() {\n  const [auctions, setAuctions] = useState([]); // Auctions data\n  const [loading, setLoading] = useState(true); // Loading state\n  const [error, setError] = useState(null); // Error state\n\n  useEffect(() => {\n    // Prevent page reload on first visit\n    if (!sessionStorage.getItem('hasVisited')) {\n      sessionStorage.setItem('hasVisited', 'true');\n      window.location.reload();\n    }\n  }, []);\n\n  useEffect(() => {\n    axios\n      .get('http://localhost:5000/api/auctions/')\n      .then((response) => {\n        setAuctions(response.data.auctions); // Ensure response contains 'auctions'\n        setLoading(false);\n      })\n      .catch((err) => {\n        setError('Failed to fetch auctions');\n        setLoading(false);\n      });\n  }, []);\n\n  // Function to get the player with the highest bid\n  const getHighestBidPlayer = () => {\n    if (auctions.length === 0) return null;\n\n    // Assuming auctions contain players with `bidAmount` property\n    return auctions\n      .flatMap((auction) => auction.players)\n      .reduce((max, player) => (player.bidAmount > (max.bidAmount || 0) ? player : max), {});\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  if (error) {\n    return <div>{error}</div>;\n  }\n\n  if (!auctions || auctions.length === 0) {\n    return <p>No auctions found.</p>;\n  }\n\n  return (\n    <div>\n      <h2>Tournament Information</h2>\n      {auctions.map((auction, index) => (\n        <div key={index}>\n          <h3>Tournament: {auction.tournamentName}</h3>\n          <h4>Teams</h4>\n          {auction.teams.map((team, teamIndex) => (\n            <div key={teamIndex}>\n              <h5>{team.name}</h5>\n              <p>Remaining Points: {team.remainingBidPoints}</p>\n            </div>\n          ))}\n\n          <h4>Players</h4>\n          {auction.players.map((player, playerIndex) => (\n            <div key={playerIndex} style={{ marginBottom: '10px' }}>\n              <p>Name: {player.name}</p>\n              {player.photo ? (\n                <img\n                  src={URL.createObjectURL(player.photo)}\n                  alt={`Player ${playerIndex + 1} Photo`}\n                  style={{ width: '100px', height: '100px', borderRadius: '50%' }}\n                />\n              ) : (\n                <p>No Photo Selected</p>\n              )}\n              <p>Team: {player.team}</p>\n              <p>Bid Amount: {player.bidAmount}</p>\n              <p>Status: {player.done ? 'Done' : 'Pending'}</p>\n            </div>\n          ))}\n\n          {/* Display the player with the highest bid */}\n          <h4>Top Bid Player</h4>\n          {getHighestBidPlayer() ? (\n            <div>\n              <p>Name: {getHighestBidPlayer().name}</p>\n              <p>Team: {getHighestBidPlayer().team}</p>\n              <p>Bid Amount: {getHighestBidPlayer().bidAmount}</p>\n              {getHighestBidPlayer().photo && (\n                <img\n                  src={URL.createObjectURL(getHighestBidPlayer().photo)}\n                  alt=\"Top Player Photo\"\n                  style={{ width: '100px', height: '100px', borderRadius: '50%' }}\n                />\n              )}\n            </div>\n          ) : (\n            <p>No players with bids yet.</p>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}