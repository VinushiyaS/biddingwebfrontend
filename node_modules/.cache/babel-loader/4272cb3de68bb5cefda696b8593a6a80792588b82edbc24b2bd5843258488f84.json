{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { loginUser } from '../api';\nimport { AuthContext } from '../context/AuthContext';\nconst Login = () => {\n  _s();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    role: 'viewer'\n  });\n  const {\n    login\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [error, setError] = useState('');\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const {\n        data\n      } = await loginUser(formData);\n      login(data.user);\n      if (formData.role === 'viewer') navigate('/viewer-dashboard');else if (formData.role === 'leader') navigate('/payment');else if (formData.role === 'admin') navigate('/admin-dashboard');\n    } catch (error) {\n      setError(\"Login failed. Please check your credentials.\");\n      console.error(\"Login failed\", error);\n    }\n  };\n\n  // return (\n  //     <div className=\"login-container\">\n  //         <h2>Log In to CrickBidders</h2>\n  //         <form onSubmit={handleSubmit} className=\"login-form\">\n  //             <input \n  //                 type=\"email\" \n  //                 name=\"email\" \n  //                 onChange={handleChange} \n  //                 placeholder=\"Email\" \n  //                 required \n  //             />\n  //             <input \n  //                 type=\"password\" \n  //                 name=\"password\" \n  //                 onChange={handleChange} \n  //                 placeholder=\"Password\" \n  //                 required \n  //             />\n  //             <select name=\"role\" onChange={handleChange}>\n  //                 <option value=\"viewer\">Viewer</option>\n  //                 <option value=\"leader\">Leader</option>\n  //                 <option value=\"admin\">Admin</option>\n  //             </select>\n  //             {error && <p className=\"error\">{error}</p>}\n  //             <button type=\"submit\">Log In</button>\n  //         </form>\n  //         <p className=\"signup-link\">\n  //             Don’t have an account? <Link to=\"/signup\">Sign Up</Link>\n  //         </p>\n  //     </div>\n  // );\n};\n_s(Login, \"2QJQMBQ87Cep+O6WAc6EQmTaloU=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useContext","useNavigate","Link","loginUser","AuthContext","Login","_s","formData","setFormData","email","password","role","login","navigate","error","setError","handleChange","e","target","name","value","handleSubmit","preventDefault","data","user","console","_c","$RefreshReg$"],"sources":["/home/uki-jaffna/biddingweb/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { loginUser } from '../api';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Login = () => {\n    const [formData, setFormData] = useState({ email: '', password: '', role: 'viewer' });\n    const { login } = useContext(AuthContext);\n    const navigate = useNavigate();\n    const [error, setError] = useState('');\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const { data } = await loginUser(formData);\n            login(data.user);\n            if (formData.role === 'viewer') navigate('/viewer-dashboard');\n            else if (formData.role === 'leader') navigate('/payment');\n            else if (formData.role === 'admin') navigate('/admin-dashboard');\n        } catch (error) {\n            setError(\"Login failed. Please check your credentials.\");\n            console.error(\"Login failed\", error);\n        }\n    };\n\n    // return (\n    //     <div className=\"login-container\">\n    //         <h2>Log In to CrickBidders</h2>\n    //         <form onSubmit={handleSubmit} className=\"login-form\">\n    //             <input \n    //                 type=\"email\" \n    //                 name=\"email\" \n    //                 onChange={handleChange} \n    //                 placeholder=\"Email\" \n    //                 required \n    //             />\n    //             <input \n    //                 type=\"password\" \n    //                 name=\"password\" \n    //                 onChange={handleChange} \n    //                 placeholder=\"Password\" \n    //                 required \n    //             />\n    //             <select name=\"role\" onChange={handleChange}>\n    //                 <option value=\"viewer\">Viewer</option>\n    //                 <option value=\"leader\">Leader</option>\n    //                 <option value=\"admin\">Admin</option>\n    //             </select>\n    //             {error && <p className=\"error\">{error}</p>}\n    //             <button type=\"submit\">Log In</button>\n    //         </form>\n    //         <p className=\"signup-link\">\n    //             Don’t have an account? <Link to=\"/signup\">Sign Up</Link>\n    //         </p>\n    //     </div>\n    // );\n};\n\nexport default Login;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACnD,SAASC,WAAW,EAAEC,IAAI,QAAQ,kBAAkB;AACpD,SAASC,SAAS,QAAQ,QAAQ;AAClC,SAASC,WAAW,QAAQ,wBAAwB;AAEpD,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC;IAAEU,KAAK,EAAE,EAAE;IAAEC,QAAQ,EAAE,EAAE;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC;EACrF,MAAM;IAAEC;EAAM,CAAC,GAAGZ,UAAU,CAACI,WAAW,CAAC;EACzC,MAAMS,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAEtC,MAAMiB,YAAY,GAAIC,CAAC,IAAK;IACxBT,WAAW,CAAC;MAAE,GAAGD,QAAQ;MAAE,CAACU,CAAC,CAACC,MAAM,CAACC,IAAI,GAAGF,CAAC,CAACC,MAAM,CAACE;IAAM,CAAC,CAAC;EACjE,CAAC;EAED,MAAMC,YAAY,GAAG,MAAOJ,CAAC,IAAK;IAC9BA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClB,IAAI;MACA,MAAM;QAAEC;MAAK,CAAC,GAAG,MAAMpB,SAAS,CAACI,QAAQ,CAAC;MAC1CK,KAAK,CAACW,IAAI,CAACC,IAAI,CAAC;MAChB,IAAIjB,QAAQ,CAACI,IAAI,KAAK,QAAQ,EAAEE,QAAQ,CAAC,mBAAmB,CAAC,CAAC,KACzD,IAAIN,QAAQ,CAACI,IAAI,KAAK,QAAQ,EAAEE,QAAQ,CAAC,UAAU,CAAC,CAAC,KACrD,IAAIN,QAAQ,CAACI,IAAI,KAAK,OAAO,EAAEE,QAAQ,CAAC,kBAAkB,CAAC;IACpE,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,QAAQ,CAAC,8CAA8C,CAAC;MACxDU,OAAO,CAACX,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;IACxC;EACJ,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACJ,CAAC;AAACR,EAAA,CAvDID,KAAK;EAAA,QAGUJ,WAAW;AAAA;AAAAyB,EAAA,GAH1BrB,KAAK;AAyDX,eAAeA,KAAK;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}